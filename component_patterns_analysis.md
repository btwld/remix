# Component Patterns Analysis

This document outlines the common patterns found across components in the `action/` and `content_presentation/` folders.

## 1. File Structure Patterns

### Standard Component Structure
All components follow a consistent 4-file structure:
```
component_name/
├── component_name.dart          # Main component file with Spec class
├── component_name.g.dart        # Generated code (Mix annotations)
├── component_name_style.dart    # Style classes and utilities
└── component_name_widget.dart   # Widget implementation
```

### File Organization
- **Main file**: Contains the Spec class with `@MixableSpec()` annotation
- **Generated file**: Auto-generated by Mix framework with utilities and attributes
- **Style file**: Contains style classes (light/dark variants) and utility classes
- **Widget file**: Contains the actual widget implementation

## 2. Class Naming Conventions

### Spec Classes
```dart
@MixableSpec()
base class ComponentNameSpec extends Spec<ComponentNameSpec> with _$ComponentNameSpec
```

### Widget Classes
```dart
class RxComponentName extends StatelessWidget  // For stateless widgets
class RxComponentName extends StatefulWidget   // For stateful widgets
```

### Style Classes
```dart
class RxComponentNameStyle extends ComponentNameSpecUtility<ComponentNameSpecAttribute>
```

## 3. Constructor Patterns

### Widget Constructors
**Standard Pattern:**
```dart
const RxComponentName({
  super.key,
  required this.requiredParam,
  this.optionalParam,
  this.variants = const [],
  this.style,
});
```

**Key Characteristics:**
- Always include `super.key`
- Required parameters come first
- Optional parameters follow
- `variants` always defaults to `const []`
- `style` is always optional and last (before variants)

### Spec Class Constructors
```dart
const ComponentNameSpec({
  PropertySpec? property1,
  PropertySpec? property2,
  super.animated,
}) : property1 = property1 ?? const PropertySpec(),
     property2 = property2 ?? const PropertySpec();
```

## 4. Style/Theme Integration Patterns

### Style Class Structure
```dart
class RxComponentNameStyle extends ComponentNameSpecUtility<ComponentNameSpecAttribute> {
  RxComponentNameStyle() : super((v) => v);

  factory RxComponentNameStyle._default() {
    return RxComponentNameStyle()
      ..property1.value1()
      ..property2.value2();
  }

  @override
  RxComponentNameStyle merge(RxComponentNameStyle other) {
    return super.merge(other) as RxComponentNameStyle;
  }
}
```

### Style Application
```dart
RxComponentNameStyle get _style =>
    RxComponentNameStyle._default().merge(style ?? RxComponentNameStyle());
```

## 5. Widget Building Patterns

### SpecBuilder Pattern
```dart
@override
Widget build(BuildContext context) {
  return SpecBuilder(
    style: Style(_style).applyVariants(variants),
    builder: (context) {
      final spec = ComponentNameSpec.of(context);
      // Widget building logic
    },
  );
}
```

### RemixBuilder Pattern
```dart
@override
Widget build(BuildContext context) {
  return RemixBuilder(
    builder: (context, theme) {
      final style = this.style ?? theme.components.componentName;
      // Widget building logic
    },
  );
}
```

## 7. Variant Usage Patterns

### Variant Declaration
```dart
final List<Variant> variants;
```

### Variant Application
```dart
Style(_style).applyVariants(variants)
```

## 8. Documentation Patterns

### Constructor Documentation
```dart
/// {@macro remix.component.variants}
final List<Variant> variants;

/// {@macro remix.component.style}
final RxComponentNameStyle? style;
```

### Class Documentation
```dart
/// A component that does X.
///
/// {@macro remix.component}
class RxComponentName extends StatelessWidget {
```

## 9. Mixin Usage Patterns

### Common Mixins
- `SingleTickerProviderStateMixin` for animations

## 10. Generated Code Patterns

### Mix Annotations
```dart
@MixableSpec()
base class ComponentNameSpec extends Spec<ComponentNameSpec> with _$ComponentNameSpec
```